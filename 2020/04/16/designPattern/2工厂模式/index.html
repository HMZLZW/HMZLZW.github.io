<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>二、工厂模式 | Hexo</title>
  <meta name="keywords" content=" 设计模式 ">
  <meta name="description" content="二、工厂模式 | Hexo">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. 你好，新世">
<meta property="og:type" content="article">
<meta property="og:title" content="Hello World">
<meta property="og:url" content="http://yoursite.com/2020/04/16/hello-world/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. 你好，新世">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-04-16T04:01:55.065Z">
<meta property="article:modified_time" content="2020-04-16T09:38:58.424Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.0.1" rel="stylesheet">

<link href="/css/hl_theme/github.css?v=1.0.1" rel="stylesheet">

<link href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js?v=1.0.1" ></script>

<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>



<script src="//cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.0.1" ></script>

<meta name="generator" content="Hexo 4.2.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="false">
  <input class="theme_blog_path" value="">
</div>

<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>John Doe</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/HMZLZW" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
        <a title="jianshu" href="https://www.jianshu.com/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-jianshu"></use>
                </svg>
            
        </a>
        
    
        
        <a title="zhihu" href="https://www.zhihu.com/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-zhihu"></use>
                </svg>
            
        </a>
        
    
        
    
        
        <a title="oschina" href="https://my.oschina.net/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-oschina"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
        <a title="kugou" href="https://www.kugou.com/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-kugou"></use>
                </svg>
            
        </a>
        
    
        
        <a title="neteasemusic" href="https://music.163.com/#/user/home?id=88151013" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-neteasemusic"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active">全部文章<small>(5)</small></div></li>
    
        
            
            <li><div data-rel="设计模式">设计模式<small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Java基础">Java基础<small>(1)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  site_url"  href="/about">关于</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="5">
<input type="hidden" id="yelog_site_word_count" value="57k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode === 13){return false;}">
        <input id="local-search-input" class="search" type="text" placeholder="以 in: 开头进行全文搜索" />
        <i class="cross"></i>
        <span>
            <label for="tagswitch">Tags:</label>
            <input id="tagswitch" type="checkbox" style="display: none" />
            <i id="tagsWitchIcon"></i>
        </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a class="color5">设计模式</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">JavaSe</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">JUC</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        <a  class=""
           href="/2020/04/16/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2020-04-16 12:01:55">2020/04/16</span>
        </a>
        
        <a  class="设计模式 "
           href="/2020/04/16/designPattern/1%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="一、单例模式">一、单例模式</span>
            <span class="post-date" title="2020-04-16 00:00:00">2020/04/16</span>
        </a>
        
        <a  class="设计模式 "
           href="/2020/04/16/designPattern/2%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="二、工厂模式">二、工厂模式</span>
            <span class="post-date" title="2020-04-16 00:00:00">2020/04/16</span>
        </a>
        
        <a  class="Java基础 "
           href="/2020/04/16/JUC/"
           data-tag="JavaSe,JUC"
           data-author="" >
            <span class="post-title" title="JUC详解">JUC详解</span>
            <span class="post-date" title="2020-04-16 00:00:00">2020/04/16</span>
        </a>
        
        <a  class="设计模式 "
           href="/2020/04/16/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="设计模式">设计模式</span>
            <span class="post-date" title="2020-04-16 00:00:00">2020/04/16</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-designPattern/2工厂模式" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">二、工厂模式</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            
                <a  data-rel="设计模式">设计模式</a>
            
        </span>
        
        
        <span class="tag">
            
            <a class="color5">设计模式</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
        创建时间:<time class="date" title='更新时间: 2020-04-16 19:40:12'>2020-04-16 00:00</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:4.8k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读:<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#二、工厂模式"><span class="toc-text">二、工厂模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、简单工厂模式"><span class="toc-text">1、简单工厂模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-、看一个具体的需求"><span class="toc-text">(1)、看一个具体的需求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-、使用传统的方式来完成"><span class="toc-text">(2)、使用传统的方式来完成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-、UML类图分析"><span class="toc-text">1)、UML类图分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-、关键代码"><span class="toc-text">2)、关键代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-、传统的方式的优缺点"><span class="toc-text">3)、传统的方式的优缺点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-、简单工厂基本介绍"><span class="toc-text">(3)、简单工厂基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-、简单工厂实现"><span class="toc-text">(4)、简单工厂实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-、UML类图分析-1"><span class="toc-text">1)、UML类图分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-、关键代码（改成静态方法）"><span class="toc-text">3)、关键代码（改成静态方法）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-、简单工厂优缺点"><span class="toc-text">(5)、简单工厂优缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-、-应用场景"><span class="toc-text">(6)、 应用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、工厂方法模式"><span class="toc-text">2、工厂方法模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-、一个新的需求"><span class="toc-text">(1)、一个新的需求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-、工厂方法模式介绍"><span class="toc-text">(2)、工厂方法模式介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-、工厂方法模式应用案例"><span class="toc-text">(3)、工厂方法模式应用案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-披萨项目新的需求："><span class="toc-text">1) 披萨项目新的需求：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-UML类图分析"><span class="toc-text">2) UML类图分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-关键代码"><span class="toc-text">3)关键代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-、工厂方法优缺点"><span class="toc-text">(4)、工厂方法优缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-、应用场景"><span class="toc-text">(5)、应用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、抽象工厂模式"><span class="toc-text">3、抽象工厂模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-、基本介绍"><span class="toc-text">(1)、基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-、抽象工厂模式应用实例"><span class="toc-text">(2)、抽象工厂模式应用实例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1）UML类图分析"><span class="toc-text">1）UML类图分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2）关键代码"><span class="toc-text">2）关键代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-、抽象工厂优缺点"><span class="toc-text">(3)、抽象工厂优缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-、补充"><span class="toc-text">(4)、补充</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、工厂模式Java源码分析"><span class="toc-text">4、工厂模式Java源码分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-、JDK-中的-Calendar-类中，简单工厂模式"><span class="toc-text">(1)、JDK 中的 Calendar 类中，简单工厂模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-、JDK-中的-sql-Connection类中，抽象工厂模式"><span class="toc-text">(2)、JDK 中的 sql.Connection类中，抽象工厂模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-、Mybatis中的SqlSessionFactory类，抽象工厂模式"><span class="toc-text">(3) 、Mybatis中的SqlSessionFactory类，抽象工厂模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、工厂模式小结"><span class="toc-text">5、工厂模式小结</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="二、工厂模式"><a href="#二、工厂模式" class="headerlink" title="二、工厂模式"></a>二、工厂模式</h1><h2 id="1、简单工厂模式"><a href="#1、简单工厂模式" class="headerlink" title="1、简单工厂模式"></a>1、简单工厂模式</h2><h3 id="1-、看一个具体的需求"><a href="#1-、看一个具体的需求" class="headerlink" title="(1)、看一个具体的需求"></a>(1)、看一个具体的需求</h3><p>​    看一个披萨的项目：要便于披萨种类的扩展，要便于维护</p>
<ol>
<li><p>披萨的种类很多(比如 GreekPizz、CheesePizz 等)</p>
</li>
<li><p>披萨的制作有 prepare，bake, cut, box</p>
</li>
<li><p>完成披萨店订购功能。</p>
</li>
</ol>
<h3 id="2-、使用传统的方式来完成"><a href="#2-、使用传统的方式来完成" class="headerlink" title="(2)、使用传统的方式来完成"></a>(2)、使用传统的方式来完成</h3><h4 id="1-、UML类图分析"><a href="#1-、UML类图分析" class="headerlink" title="1)、UML类图分析"></a>1)、UML类图分析</h4><p>这样设计耦合性很高，一个orderPizza类也依赖了具体的实现GreekPizza和CheessPizza，如果增加新的披萨种类，会有更多的依赖，<strong>违反了OCP原则</strong>。</p>
<img src="/2020/04/16/designPattern/2%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/QQ截图20200116163455.png" style="zoom:80%;">

<h4 id="2-、关键代码"><a href="#2-、关键代码" class="headerlink" title="2)、关键代码"></a>2)、关键代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造器</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">OrderPizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">   String orderType; <span class="comment">// 订购披萨的类型</span></span><br><span class="line">   <span class="keyword">do</span> &#123;</span><br><span class="line">      orderType = getType();</span><br><span class="line">       <span class="comment">//这里每次增加新的种类披萨都要修改代码</span></span><br><span class="line">       </span><br><span class="line">      <span class="keyword">if</span> (orderType.equals(<span class="string">"greek"</span>)) &#123;</span><br><span class="line">         pizza = <span class="keyword">new</span> GreekPizza();</span><br><span class="line">         pizza.setName(<span class="string">" 希腊披萨 "</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (orderType.equals(<span class="string">"cheese"</span>)) &#123;</span><br><span class="line">         pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line">         pizza.setName(<span class="string">" 奶酪披萨 "</span>);</span><br><span class="line">      &#125;  <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//输出pizza 制作过程</span></span><br><span class="line">      pizza.prepare();</span><br><span class="line">      pizza.bake();</span><br><span class="line">      pizza.cut();</span><br><span class="line">      pizza.box();</span><br><span class="line">   &#125; <span class="keyword">while</span> (<span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写一个方法，可以获取客户希望订购的披萨种类</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">      BufferedReader strin = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">      System.out.println(<span class="string">"input pizza 种类:"</span>);</span><br><span class="line">      String str = strin.readLine();</span><br><span class="line">      <span class="keyword">return</span> str;</span><br><span class="line">   &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">      <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-、传统的方式的优缺点"><a href="#3-、传统的方式的优缺点" class="headerlink" title="3)、传统的方式的优缺点"></a>3)、传统的方式的优缺点</h4><ol>
<li><p>优点是比较好理解，简单易操作。</p>
</li>
<li><p>缺点是违反了designPattern的 ocp  原则，即对扩展开放，对修改关闭。即当我们给类增加新功能的时候，尽量不修改代码，或者尽可能少修改代码.</p>
</li>
<li><p>比如我们这时 要新增加一个 Pizza  的种类(Pepper  披萨)，我们需要做如下修改.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (orderType.equals(<span class="string">"greek"</span>)) &#123;</span><br><span class="line">   pizza = <span class="keyword">new</span> GreekPizza();</span><br><span class="line">   pizza.setName(<span class="string">" 希腊披萨 "</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (orderType.equals(<span class="string">"cheese"</span>)) &#123;</span><br><span class="line">   pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line">   pizza.setName(<span class="string">" 奶酪披萨 "</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (orderType.equals(<span class="string">"pepper"</span>)) &#123;</span><br><span class="line">   pizza = <span class="keyword">new</span> PepperPizza();</span><br><span class="line">   pizza.setName(<span class="string">"胡椒披萨"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果我们增加一个 Pizza 类，只要是订购 Pizza 的代码都需要修改.</p>
</li>
<li><p>改进的思路分析<br>分析：修改代码可以接受，但是如果我们在其它的地方也有创建 Pizza 的代码，就意味着，也需要修改，而创建 Pizza的代码，往往有多处。<br>思路： <strong>把创建 Pizza  对象封装到一个类中</strong> ， <strong>这样我们有新的 Pizza  种类时</strong>， 只需要修改该类就可，其它有创建到 Pizza<br>对象的代码就不需要修改了.-&gt;  简单工厂模式</p>
</li>
</ol>
<h3 id="3-、简单工厂基本介绍"><a href="#3-、简单工厂基本介绍" class="headerlink" title="(3)、简单工厂基本介绍"></a>(3)、简单工厂基本介绍</h3><p>1) 简单工厂模式是属于 <strong>创建型模式</strong>，是工厂模式的一种。简单工厂模式是由一个工厂对象决定创建出哪一种产品<br>类的实例。简单工厂模式是 工厂模式家族中<strong>最简单实用的模式</strong><br>2) 简单工厂模式：定义了一个创建对象的类，由<strong>这个类来 封装实例化对象的行为(代码)</strong><br>3) 在软件开发中，当我们会用到大量的创建某种、某类或者某批对象时，就会使用到工厂模式.</p>
<h3 id="4-、简单工厂实现"><a href="#4-、简单工厂实现" class="headerlink" title="(4)、简单工厂实现"></a>(4)、简单工厂实现</h3><h4 id="1-、UML类图分析-1"><a href="#1-、UML类图分析-1" class="headerlink" title="1)、UML类图分析"></a>1)、UML类图分析</h4><img src="/2020/04/16/designPattern/2%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/QQ截图20200116170558.png" style="zoom:80%;">

<p>####2)、关键代码（普通方法）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个简单工厂对象</span></span><br><span class="line">SimpleFactory simpleFactory;</span><br><span class="line">Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">OrderPizza</span><span class="params">(SimpleFactory simpleFactory)</span> </span>&#123;</span><br><span class="line">   setFactory(simpleFactory);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFactory</span><span class="params">(SimpleFactory simpleFactory)</span> </span>&#123;</span><br><span class="line">   String orderType = <span class="string">""</span>; <span class="comment">//用户输入的</span></span><br><span class="line">   <span class="keyword">this</span>.simpleFactory = simpleFactory; <span class="comment">//设置简单工厂对象</span></span><br><span class="line">   <span class="keyword">do</span> &#123;</span><br><span class="line">      orderType = getType();</span><br><span class="line">      pizza = <span class="keyword">this</span>.simpleFactory.createPizza(orderType);</span><br><span class="line">      <span class="comment">//输出pizza</span></span><br><span class="line">      <span class="keyword">if</span>(pizza != <span class="keyword">null</span>) &#123; <span class="comment">//订购成功</span></span><br><span class="line">         pizza.prepare();</span><br><span class="line">         pizza.bake();</span><br><span class="line">         pizza.cut();</span><br><span class="line">         pizza.box();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         System.out.println(<span class="string">" 订购披萨失败 "</span>);</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;<span class="keyword">while</span>(<span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样的代码还可以升级为下面一种静态方法，不用new SimpleFactory实例，直接就可以调用。</p>
<p>工厂模式，<strong>工厂一般都有很多地方调用。一般要配合单例模式来进行使用。</strong></p>
<h4 id="3-、关键代码（改成静态方法）"><a href="#3-、关键代码（改成静态方法）" class="headerlink" title="3)、关键代码（改成静态方法）"></a>3)、关键代码（改成静态方法）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">OrderPizza2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">do</span> &#123;</span><br><span class="line">      orderType = getType();</span><br><span class="line">      pizza = SimpleFactory.createPizza2(orderType);</span><br><span class="line">      <span class="comment">// 输出pizza</span></span><br><span class="line">      <span class="keyword">if</span> (pizza != <span class="keyword">null</span>) &#123; <span class="comment">// 订购成功</span></span><br><span class="line">         pizza.prepare();</span><br><span class="line">         pizza.bake();</span><br><span class="line">         pizza.cut();</span><br><span class="line">         pizza.box();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         System.out.println(<span class="string">" 订购披萨失败 "</span>);</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125; <span class="keyword">while</span> (<span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​       每一个OrderPizza去使用SimpleFactory时，只需要用createPizza2(创建对象)方法即可，不需要关注里面的实现细节。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SimpleFactory里面的createPizza2方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Pizza <span class="title">createPizza2</span><span class="params">(String orderType)</span> </span>&#123;</span><br><span class="line">    Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">    System.out.println(<span class="string">"使用简单工厂模式2"</span>);</span><br><span class="line">    <span class="keyword">if</span> (orderType.equals(<span class="string">"greek"</span>)) &#123;</span><br><span class="line">        pizza = <span class="keyword">new</span> GreekPizza();</span><br><span class="line">        pizza.setName(<span class="string">" 希腊披萨 "</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (orderType.equals(<span class="string">"cheese"</span>)) &#123;</span><br><span class="line">        pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line">        pizza.setName(<span class="string">" 奶酪披萨 "</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (orderType.equals(<span class="string">"pepper"</span>)) &#123;</span><br><span class="line">        pizza = <span class="keyword">new</span> PepperPizza();</span><br><span class="line">        pizza.setName(<span class="string">"胡椒披萨"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pizza;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-、简单工厂优缺点"><a href="#5-、简单工厂优缺点" class="headerlink" title="(5)、简单工厂优缺点"></a>(5)、简单工厂优缺点</h3><p><strong>优点：</strong></p>
<ul>
<li>将创建实例的工作与使用实例的工作分开，使用者不必关心类对象如何创建，实现了解耦；</li>
<li>把初始化实例时的工作放到工厂里进行，使代码更容易维护。 更符合面向对象的原则 &amp; 面向接口编程，而不是面向实现编程。</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>工厂类集中了所有实例（产品）的创建逻辑，一旦这个工厂不能正常工作，整个系统都会受到影响；</li>
<li>违背“开放 - 关闭原则”，一旦添加新产品就不得不修改工厂类的逻辑，这样就会造成工厂逻辑过于复杂。</li>
<li>简单工厂模式由于使用了静态工厂方法，<strong>静态方法不能被继承和重写</strong>，会造成工厂角色无法形成基于继承的等级结构。</li>
</ul>
<h3 id="6-、-应用场景"><a href="#6-、-应用场景" class="headerlink" title="(6)、 应用场景"></a>(6)、 应用场景</h3><p>在了解了优缺点后，我们知道了简单工厂模式的应用场景：</p>
<ul>
<li>客户如果只知道传入工厂类的参数，对于如何创建对象的逻辑不关心时；</li>
<li>当工厂类负责创建的对象（具体产品）比较少时。</li>
</ul>
<h2 id="2、工厂方法模式"><a href="#2、工厂方法模式" class="headerlink" title="2、工厂方法模式"></a>2、工厂方法模式</h2><h3 id="1-、一个新的需求"><a href="#1-、一个新的需求" class="headerlink" title="(1)、一个新的需求"></a>(1)、一个新的需求</h3><p>披萨项目新的需求：客户在点披萨时，可以点 不同口味的披萨，比如 北京的奶酪 pizza、北京的胡椒 pizza 或<br>者是伦敦的奶酪 pizza、伦敦的胡椒 pizza。</p>
<ul>
<li>思路 1：使用 简单工厂模式，创建 不同的简单工厂类，比如 BJPizzaSimpleFactory、LDPizzaSimpleFactory 等等。从当前这个案例来说，也是可以的，但是考虑到项目的规模，以及软件的可维护性、可扩展性并不是特别好。不停的创建SimpleFactory类，会有类爆炸的问题。</li>
<li>思路 2：使用工厂方法模式</li>
</ul>
<h3 id="2-、工厂方法模式介绍"><a href="#2-、工厂方法模式介绍" class="headerlink" title="(2)、工厂方法模式介绍"></a>(2)、工厂方法模式介绍</h3><ol>
<li>工厂方法模式设计方案：将披萨项目的实例化功能抽象成抽象方法，在不同的口味点餐子类中具体实现。</li>
<li>工厂方法模式： 定义了一个创建对象的抽象方法，由子类决定要实例化的类。工厂方法模式将对象的实例化推迟到子类</li>
</ol>
<h3 id="3-、工厂方法模式应用案例"><a href="#3-、工厂方法模式应用案例" class="headerlink" title="(3)、工厂方法模式应用案例"></a>(3)、工厂方法模式应用案例</h3><h4 id="1-披萨项目新的需求："><a href="#1-披萨项目新的需求：" class="headerlink" title="1) 披萨项目新的需求："></a>1) 披萨项目新的需求：</h4><p>客户在点披萨时，可以点不同口味的披萨，比如 北京的奶酪 pizza、北京的胡椒 pizza 或者是伦敦的奶酪 pizza、伦敦的胡椒 pizza</p>
<h4 id="2-UML类图分析"><a href="#2-UML类图分析" class="headerlink" title="2) UML类图分析"></a>2) UML类图分析</h4><img src="/2020/04/16/designPattern/2%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/QQ截图20200116192605.png" style="zoom:80%;">

<p>说白了就是一个大工厂分解成若干个小工厂，由子类决定要实例化的类</p>
<h4 id="3-关键代码"><a href="#3-关键代码" class="headerlink" title="3)关键代码"></a>3)关键代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PizzaStore</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      String loc = <span class="string">"bj"</span>;</span><br><span class="line">      <span class="keyword">if</span> (loc.equals(<span class="string">"bj"</span>)) &#123;</span><br><span class="line">         <span class="comment">//创建北京口味的各种Pizza</span></span><br><span class="line">         <span class="keyword">new</span> BJOrderPizza();   <span class="comment">//原本一个大工厂，现在搞出不同的小工厂来了</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="comment">//创建伦敦口味的各种Pizza</span></span><br><span class="line">         <span class="keyword">new</span> LDOrderPizza();</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BJOrderPizza类（其中的一个小工厂）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BJOrderPizza</span> <span class="keyword">extends</span> <span class="title">OrderPizza</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function">Pizza <span class="title">createPizza</span><span class="params">(String orderType)</span> </span>&#123;</span><br><span class="line">      Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">      <span class="keyword">if</span>(orderType.equals(<span class="string">"cheese"</span>)) &#123;</span><br><span class="line">         pizza = <span class="keyword">new</span> BJCheesePizza();</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (orderType.equals(<span class="string">"pepper"</span>)) &#123;</span><br><span class="line">         pizza = <span class="keyword">new</span> BJPepperPizza();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> pizza;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>LDOrderPizza类（其中的一个小工厂）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LDOrderPizza</span> <span class="keyword">extends</span> <span class="title">OrderPizza</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function">Pizza <span class="title">createPizza</span><span class="params">(String orderType)</span> </span>&#123;</span><br><span class="line">      Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">      <span class="keyword">if</span>(orderType.equals(<span class="string">"cheese"</span>)) &#123;</span><br><span class="line">         pizza = <span class="keyword">new</span> LDCheesePizza();</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (orderType.equals(<span class="string">"pepper"</span>)) &#123;</span><br><span class="line">         pizza = <span class="keyword">new</span> LDPepperPizza();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> pizza;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4-、工厂方法优缺点"><a href="#4-、工厂方法优缺点" class="headerlink" title="(4)、工厂方法优缺点"></a>(4)、工厂方法优缺点</h3><p><strong>优点：</strong></p>
<ul>
<li><p>更符合开-闭原则<br>新增一种产品时，只需要增加相应的具体产品类和相应的工厂子类即可</p>
<blockquote>
<p>简单工厂模式需要修改工厂类的判断逻辑</p>
</blockquote>
</li>
<li><p>符合单一职责原则<br>每个具体工厂类只负责创建对应的产品</p>
<blockquote>
<p>简单工厂中的工厂类存在复杂的switch逻辑判断</p>
</blockquote>
</li>
<li><p>不使用静态工厂方法，可以形成基于继承的等级结构。</p>
<blockquote>
<p>简单工厂模式的工厂类使用静态工厂方法</p>
</blockquote>
</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>添加新产品时，除了增加新产品类外，还要提供与之对应的具体工厂类，系统类的个数将成对增加，在一定程度上增加了系统的复杂度；同时，有更多的类需要编译和运行，会给系统带来一些额外的开销；</li>
<li>由于考虑到系统的可扩展性，需要引入抽象层，在客户端代码中均使用抽象层进行定义，增加了系统的抽象性和理解难度，且在实现时可能需要用到DOM、反射等技术，增加了系统的实现难度。</li>
<li>虽然保证了工厂方法内的对修改关闭，但对于使用工厂方法的类，如果要更换另外一种产品，仍然需要修改实例化的具体工厂类；</li>
<li>一个具体工厂只能创建一种具体产品</li>
</ul>
<p><strong>总结：</strong></p>
<p>工厂模式可以说是简单工厂模式的进一步抽象和拓展，在保留了简单工厂的封装优点的同时，让扩展变得简单，让继承变得可行，增加了多态性的体现。</p>
<h3 id="5-、应用场景"><a href="#5-、应用场景" class="headerlink" title="(5)、应用场景"></a>(5)、应用场景</h3><p>在了解了优缺点后，总结了工厂方法模式的应用场景：</p>
<ul>
<li>当一个类不知道它所需要的对象的类时<br>在工厂方法模式中，客户端不需要知道具体产品类的类名，只需要知道所对应的工厂即可；</li>
<li>当一个类希望通过其子类来指定创建对象时<br>在工厂方法模式中，对于抽象工厂类只需要提供一个创建产品的接口，而由其子类来确定具体要创建的对象，利用面向对象的多态性和里氏代换原则，在程序运行时，子类对象将覆盖父类对象，从而使得系统更容易扩展。</li>
<li>将创建对象的任务委托给多个工厂子类中的某一个，客户端在使用时可以无须关心是哪一个工厂子类创建产品子类，需要时再动态指定，可将具体工厂类的类名存储在配置文件或数据库中。</li>
</ul>
<h2 id="3、抽象工厂模式"><a href="#3、抽象工厂模式" class="headerlink" title="3、抽象工厂模式"></a>3、抽象工厂模式</h2><h3 id="1-、基本介绍"><a href="#1-、基本介绍" class="headerlink" title="(1)、基本介绍"></a>(1)、基本介绍</h3><ol>
<li>抽象工厂模式：定义了一个 interface  用于创建相关或有依赖关系的对象簇，而无需指明具体的类</li>
<li>抽象工厂模式可以将简单工厂模式和工厂方法模式进行整合。</li>
<li>从设计层面看，抽象工厂模式就是对简单工厂模式的改进(或者称为进一步的抽象)。</li>
<li>将工厂抽象成 两层，AbsFactory( 抽象工厂) 和  具体实现的工厂子类。程序员可以根据创建对象类型使用对应的工厂子类。这样将单个的简单工厂类变成了工厂簇，更利于代码的维护和扩展。</li>
</ol>
<h3 id="2-、抽象工厂模式应用实例"><a href="#2-、抽象工厂模式应用实例" class="headerlink" title="(2)、抽象工厂模式应用实例"></a>(2)、抽象工厂模式应用实例</h3><h4 id="1）UML类图分析"><a href="#1）UML类图分析" class="headerlink" title="1）UML类图分析"></a>1）UML类图分析</h4><img src="/2020/04/16/designPattern/2%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/QQ截图20200116200607.png" style="zoom: 67%;">

<p> OrderPizza类中聚合AbsFactory接口（或抽象类），就代表聚合进去了BeiJing Orderpizza或London Orderpizza，这里可以进行选择实际子类的工厂究竟是哪一个。</p>
<h4 id="2）关键代码"><a href="#2）关键代码" class="headerlink" title="2）关键代码"></a>2）关键代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一个抽象工厂模式的抽象层(接口)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AbsFactory</span> </span>&#123;</span><br><span class="line">   <span class="comment">//让下面的工厂子类来 具体实现</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Pizza <span class="title">createPizza</span><span class="params">(String orderType)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BJFactory类实现AbsFactory接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;这是工厂子类</span><br><span class="line">public class BJFactory implements AbsFactory &#123;</span><br><span class="line">   @Override</span><br><span class="line">   public Pizza createPizza(String orderType) &#123;</span><br><span class="line">      System.out.println(&quot;~使用的是抽象工厂模式~&quot;);</span><br><span class="line">      Pizza pizza &#x3D; null;</span><br><span class="line">      if(orderType.equals(&quot;cheese&quot;)) &#123;</span><br><span class="line">         pizza &#x3D; new BJCheesePizza();</span><br><span class="line">      &#125; else if (orderType.equals(&quot;pepper&quot;))&#123;</span><br><span class="line">         pizza &#x3D; new BJPepperPizza();</span><br><span class="line">      &#125;</span><br><span class="line">      return pizza;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-、抽象工厂优缺点"><a href="#3-、抽象工厂优缺点" class="headerlink" title="(3)、抽象工厂优缺点"></a>(3)、抽象工厂优缺点</h3><p>  <strong>优点：</strong></p>
<ul>
<li>降低耦合<br> 抽象工厂模式将具体产品的创建延迟到具体工厂的子类中，这样将对象的创建封装起来，可以减少客户端与具体产品类之间的依赖，从而使系统耦合度低，这样更有利于后期的维护和扩展；</li>
<li>更符合开-闭原则<br> 新增一种产品类时，只需要增加相应的具体产品类和相应的工厂子类即可</li>
</ul>
<blockquote>
<p>简单工厂模式需要修改工厂类的判断逻辑</p>
</blockquote>
<ul>
<li>符合单一职责原则<br> 每个具体工厂类只负责创建对应的产品</li>
</ul>
<blockquote>
<p>简单工厂中的工厂类存在复杂的switch逻辑判断</p>
</blockquote>
<ul>
<li>不使用静态工厂方法，可以形成基于继承的等级结构。</li>
</ul>
<blockquote>
<p>简单工厂模式的工厂类使用静态工厂方法</p>
</blockquote>
<hr>
<p><strong>缺点：</strong></p>
<p>抽象工厂模式很难支持新种类产品的变化。<br>这是因为抽象工厂接口中已经确定了可以被创建的产品集合，如果需要添加新产品，此时就必须去修改抽象工厂的接口，这样就涉及到抽象工厂类的以及所有子类的改变，这样也就违背了“开发——封闭”原则。</p>
<p>如果实现要增加一个新的产品，在接口里面增加一个方法。这种直接修改抽象接口的做法，会导致其所有实现子类都需要进行修改，重写这个未实现的方法，<strong>违反了开闭原则</strong>。当然，如果这种修改是长期稳定的，那么也可以接受。</p>
<blockquote>
<p>对于新的产品族符合开-闭原则；对于新的产品种类不符合开-闭原则，这一特性称为开-闭原则的倾斜性。</p>
<p><strong>在抽象工厂模式中，增加新的产品族很方便，但是增加新的产品等级结构很麻烦</strong>，抽象工厂模式的这种性质称为<strong>“开闭原则”的倾斜性</strong>。</p>
</blockquote>
<h3 id="4-、补充"><a href="#4-、补充" class="headerlink" title="(4)、补充"></a>(4)、补充</h3><p> 弹幕大神：</p>
<ul>
<li>这里要是换成上衣和裤子区别比较好，上衣工厂和裤子工厂都是抽象衣服工厂子类。</li>
<li>工厂方法就是父类已经实现了一个整合方法，子类直接继承；抽象工厂就是接口没有实现任何逻辑</li>
<li>继承是侵入性的 而且java是单继承，抽成接口，那么工厂类可以实现接口，不需要改变继承关系，目的就是拓展某各类功能</li>
</ul>
<p>这个披萨的案例其实讲的不是很好，配合网上资料，大概能明白，网上有几篇文章将的不错</p>
<p><a href="https://blog.csdn.net/u014727260/article/details/82560912" target="_blank" rel="noopener">CSDN：抽象工厂</a></p>
<p><a href="https://www.jianshu.com/p/7deb64f902db" target="_blank" rel="noopener">简书：抽象工厂模式（Abstract Factory）- 最易懂的designPattern解析</a></p>
<h2 id="4、工厂模式Java源码分析"><a href="#4、工厂模式Java源码分析" class="headerlink" title="4、工厂模式Java源码分析"></a>4、工厂模式Java源码分析</h2><h3 id="1-、JDK-中的-Calendar-类中，简单工厂模式"><a href="#1-、JDK-中的-Calendar-类中，简单工厂模式" class="headerlink" title="(1)、JDK 中的 Calendar 类中，简单工厂模式"></a>(1)、JDK 中的 Calendar 类中，简单工厂模式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// getInstance 是 Calendar 静态方法</span></span><br><span class="line">      Calendar cal = Calendar.getInstance();</span><br><span class="line">      <span class="comment">// 注意月份下标从0开始，所以取月份要+1</span></span><br><span class="line">      System.out.println(<span class="string">"年:"</span> + cal.get(Calendar.YEAR));</span><br><span class="line">      System.out.println(<span class="string">"月:"</span> + (cal.get(Calendar.MONTH) + <span class="number">1</span>));</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意 Calendar cal = Calendar.getInstance(); 不是new出来的,而是通过getInstance（）一个静态方法得到对象，debug进去</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Calendar <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> createCalendar(TimeZone.getDefault(),Locale.getDefault(Locale.Category.FORMAT));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果没有设定时区和位置，这里直接回返回默认的对象，</p>
<p>继续debug进去</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Calendar <span class="title">createCalendar</span><span class="params">(TimeZone zone,</span></span></span><br><span class="line"><span class="function"><span class="params">                                       Locale aLocale)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CalendarProvider provider =</span><br><span class="line">        LocaleProviderAdapter.getAdapter(CalendarProvider<span class="class">.<span class="keyword">class</span>, <span class="title">aLocale</span>)</span></span><br><span class="line"><span class="class">                             .<span class="title">getCalendarProvider</span>()</span>;</span><br><span class="line">    <span class="keyword">if</span> (provider != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> provider.getInstance(zone, aLocale);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalArgumentException iae) &#123;</span><br><span class="line">            <span class="comment">// fall back to the default instantiation</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Calendar cal = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (aLocale.hasExtensions()) &#123;</span><br><span class="line">        String caltype = aLocale.getUnicodeLocaleType(<span class="string">"ca"</span>);</span><br><span class="line">        <span class="keyword">if</span> (caltype != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (caltype) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"buddhist"</span>:</span><br><span class="line">            cal = <span class="keyword">new</span> BuddhistCalendar(zone, aLocale);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"japanese"</span>:</span><br><span class="line">                cal = <span class="keyword">new</span> JapaneseImperialCalendar(zone, aLocale);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"gregory"</span>:</span><br><span class="line">                cal = <span class="keyword">new</span> GregorianCalendar(zone, aLocale);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cal == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (aLocale.getLanguage() == <span class="string">"th"</span> &amp;&amp; aLocale.getCountry() == <span class="string">"TH"</span>) &#123;</span><br><span class="line">            cal = <span class="keyword">new</span> BuddhistCalendar(zone, aLocale);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aLocale.getVariant() == <span class="string">"JP"</span> &amp;&amp; aLocale.getLanguage() == <span class="string">"ja"</span></span><br><span class="line">                   &amp;&amp; aLocale.getCountry() == <span class="string">"JP"</span>) &#123;</span><br><span class="line">            cal = <span class="keyword">new</span> JapaneseImperialCalendar(zone, aLocale);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cal = <span class="keyword">new</span> GregorianCalendar(zone, aLocale);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中初始化Calendar cal = null;</p>
<p>然后通过switch使用不同工厂进行创建对象，使用了简单方法工厂模式，</p>
<p>最后return回去</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Calendar cal = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (aLocale.hasExtensions()) &#123;</span><br><span class="line">    String caltype = aLocale.getUnicodeLocaleType(<span class="string">"ca"</span>);</span><br><span class="line">    <span class="keyword">if</span> (caltype != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (caltype) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"buddhist"</span>:</span><br><span class="line">        cal = <span class="keyword">new</span> BuddhistCalendar(zone, aLocale);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"japanese"</span>:</span><br><span class="line">            cal = <span class="keyword">new</span> JapaneseImperialCalendar(zone, aLocale);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"gregory"</span>:</span><br><span class="line">            cal = <span class="keyword">new</span> GregorianCalendar(zone, aLocale);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-、JDK-中的-sql-Connection类中，抽象工厂模式"><a href="#2-、JDK-中的-sql-Connection类中，抽象工厂模式" class="headerlink" title="(2)、JDK 中的 sql.Connection类中，抽象工厂模式"></a>(2)、JDK 中的 sql.Connection类中，抽象工厂模式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Connection</span>  <span class="keyword">extends</span> <span class="title">Wrapper</span>, <span class="title">AutoCloseable</span> </span>&#123;</span><br><span class="line">	<span class="comment">//...    	</span></span><br><span class="line">    	<span class="comment">//返回普通的sql执行器</span></span><br><span class="line">        <span class="function">Statement <span class="title">createStatement</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">		<span class="comment">//返回具有参数化预编译功能的sql执行器</span></span><br><span class="line">    	<span class="function">PreparedStatement <span class="title">prepareStatement</span><span class="params">(String sql)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">    	<span class="comment">//返回可以执行存储过程的sql执行器</span></span><br><span class="line">        <span class="function">CallableStatement <span class="title">prepareCall</span><span class="params">(String sql)</span> <span class="keyword">throws</span> SQLException</span>;   </span><br><span class="line">    <span class="comment">//...         </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从上面的注释就可以看出，这就是典型的抽象工厂接口，描述了不同的产品等级Statement、PreparedStatement、CallableStatement，它们都位于抽象接口Statement产品等级结构中。我们可以继续寻找该抽象工厂接口的实现类</p>
<p>这里就以Mysql为例，可以找到Mysql对这个工厂接口的实现类ConnectionImpl，ConnectionImpl并不是直接实现了java.sql.Connection,而是通过实现自己扩展的MySQLConnection接口，该接口也是间接继承了java.sql.Connection</p>
<img src="/2020/04/16/designPattern/2%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/20180909172407.png" style="zoom:80%;">



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionImpl</span> <span class="keyword">extends</span> <span class="title">ConnectionPropertiesImpl</span> <span class="keyword">implements</span> <span class="title">MySQLConnection</span> </span>&#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line"> <span class="keyword">public</span> java.sql.<span class="function">Statement <span class="title">createStatement</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> createStatement(DEFAULT_RESULT_SET_TYPE, DEFAULT_RESULT_SET_CONCURRENCY);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> java.sql.<span class="function">PreparedStatement <span class="title">prepareStatement</span><span class="params">(String sql)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> prepareStatement(sql, DEFAULT_RESULT_SET_TYPE, DEFAULT_RESULT_SET_CONCURRENCY);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"> <span class="keyword">public</span> java.sql.<span class="function">CallableStatement <span class="title">prepareCall</span><span class="params">(String sql)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> prepareCall(sql, DEFAULT_RESULT_SET_TYPE, DEFAULT_RESULT_SET_CONCURRENCY);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以<code>createStatement</code>为例，跟踪其调用代码可以看到<strong>StatementImpl</strong>这个类就是实现了java.sql.Statement的具体产品类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> java.sql.<span class="function">Statement <span class="title">createStatement</span><span class="params">(<span class="keyword">int</span> resultSetType, <span class="keyword">int</span> resultSetConcurrency)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    checkClosed();</span><br><span class="line"></span><br><span class="line">    StatementImpl stmt = <span class="keyword">new</span> StatementImpl(getMultiHostSafeProxy(), <span class="keyword">this</span>.database);</span><br><span class="line">    stmt.setResultSetType(resultSetType);</span><br><span class="line">    stmt.setResultSetConcurrency(resultSetConcurrency);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> stmt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-、Mybatis中的SqlSessionFactory类，抽象工厂模式"><a href="#3-、Mybatis中的SqlSessionFactory类，抽象工厂模式" class="headerlink" title="(3) 、Mybatis中的SqlSessionFactory类，抽象工厂模式"></a>(3) 、Mybatis中的SqlSessionFactory类，抽象工厂模式</h3><ul>
<li>mybatis中的SqlSessionFactory</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Creates an &#123;<span class="doctag">@link</span> SqlSession&#125; out of a connection or a DataSource</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Clinton Begin</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SqlSessionFactory</span> </span>&#123;</span><br><span class="line">  <span class="function">SqlSession <span class="title">openSession</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="function">SqlSession <span class="title">openSession</span><span class="params">(<span class="keyword">boolean</span> autoCommit)</span></span>;</span><br><span class="line">  <span class="function">SqlSession <span class="title">openSession</span><span class="params">(Connection connection)</span></span>;</span><br><span class="line">  <span class="function">SqlSession <span class="title">openSession</span><span class="params">(TransactionIsolationLevel level)</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="function">SqlSession <span class="title">openSession</span><span class="params">(ExecutorType execType)</span></span>;</span><br><span class="line">  <span class="function">SqlSession <span class="title">openSession</span><span class="params">(ExecutorType execType, <span class="keyword">boolean</span> autoCommit)</span></span>;</span><br><span class="line">  <span class="function">SqlSession <span class="title">openSession</span><span class="params">(ExecutorType execType, TransactionIsolationLevel level)</span></span>;</span><br><span class="line">  <span class="function">SqlSession <span class="title">openSession</span><span class="params">(ExecutorType execType, Connection connection)</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="function">Configuration <span class="title">getConfiguration</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>SqlSessionFactory也是抽象工厂接口，Configuration和SqlSession都是在不同的产品等级上。通过IDEA工具可以通过UML图清晰得看到SqlSessionFactory的工厂实现类</p>
<img src="/2020/04/16/designPattern/2%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/20180909180700.png" style="zoom: 67%;">



<h2 id="5、工厂模式小结"><a href="#5、工厂模式小结" class="headerlink" title="5、工厂模式小结"></a>5、工厂模式小结</h2><ol>
<li><p>工厂模式的意义：<br>将实例化对象的代码提取出来，放到一个类中统一管理和维护，达到和主项目的依赖关系的解耦。从而提高项<br>目的扩展和维护性。</p>
</li>
<li><p>三种工厂模式 ：</p>
<p>(简单工厂模式、工厂方法模式、抽象工厂模式)</p>
</li>
<li><p>designPattern的依赖抽象原则 ：</p>
</li>
</ol>
<ul>
<li>创建对象实例时，不要直接 new 类, 而是把这个 new 类的动作放在一个工厂的方法中，并返回。有的书上说，变量不要直接持有具体类的引用。</li>
<li>不要让类继承具体类，而是继承抽象类或者是实现 interface(接口)</li>
<li>不要覆盖基类中已经实现的方法。</li>
</ul>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 jaytp@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>


<div class="article_copyright">
    <p><span class="copy-title">文章标题:</span>二、工厂模式</p>
    <p><span class="copy-title">文章字数:</span><span class="post-count">4.8k</span></p>
    <p><span class="copy-title">本文作者:</span><a  title="John Doe">John Doe</a></p>
    <p><span class="copy-title">发布时间:</span>2020-04-16, 00:00:00</p>
    <p><span class="copy-title">最后更新:</span>2020-04-16, 19:40:12</p>
    <span class="copy-title">原始链接:</span><a class="post-url" href="/2020/04/16/designPattern/2%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" title="二、工厂模式">http://yoursite.com/2020/04/16/designPattern/2%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</a>
    <p>
        <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
    </p>
</div>





    




    </div>
    <div class="copyright">
        <p class="footer-entry">©2016-2020 HMZLZW</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">目录</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" ></a>

    </div>
</div>
<div class="acParent"></div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.0.1" ></script>

<script src="/js/script.js?v=1.0.1" ></script>
<script>
    var img_resize = 'default';
    /*作者、标签的自动补全*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['#设计模式','#JavaSe','#JUC',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0px;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
        .nav .hide-list.fullscreen {
            left: 492px
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    
    .post .pjax article .article-entry>ol, .post .pjax article .article-entry>ul, .post .pjax article>ol, .post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    .post .pjax article .article-entry li>ol, .post .pjax article .article-entry li>ul,.post .pjax article li>ol, .post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .post .pjax article .article-entry>ol>li, .post .pjax article .article-entry>ul>li,.post .pjax article>ol>li, .post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    .post .pjax article .article-entry li>ol>li, .post .pjax article .article-entry li>ul>li,.post .pjax article li>ol>li, .post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
